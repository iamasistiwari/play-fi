generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String @id @default(uuid())
  email       String @unique
  name        String
  password    String?
  provider    String
  hostedSpace Room[] @relation("Hosted")
  joinedRooms RoomUser[]
}

model Room {
  roomId        String @id
  ownerId       String
  ownerName     String
  roomName      String
  roomPassword  String
  created_At    DateTime
  maxJoinedUser Int
  queue         Song[]
  user          User   @relation("Hosted", fields: [ownerId], references: [id])
  joinedUser    RoomUser[] 
}

model RoomUser {
  userId String
  roomId String
  joinedAt DateTime
  user User @relation(fields: [userId], references: [id])
  room Room @relation(fields: [roomId], references: [roomId])
  @@id([userId, roomId])
}

model Song {
  songId       String @id
  bigImg       String @default("")
  smallImg     String @default("")
  title        String
  channelTitle String
  length       String
  addedTime    DateTime
  room Room[]
}
